var user_email_input="";
$(document).ready(function(){user_email_input=$("#email").val();subscription_form_validate();$(".email-field-subscribe").keyup(function(){var user_email_input_update=$("#subscribe-form").find("#email").val();if(user_email_input!==user_email_input_update){user_email_input=user_email_input_update;prompt_for_correct_email("subscribe-form","email")}});$(".email-field-subscribe-marketing-right").keyup(function(){var user_email_input_update=$("#subscribe-form").find("#email").val();if(user_email_input!==
user_email_input_update){user_email_input=user_email_input_update;prompt_for_correct_email("subscribe-form","email")}});$(".subscribe-form-at-bottom-email").keyup(function(){var user_email_input_update=$("#subscribe-form-at-bottom").find("#email").val();if(user_email_input!==user_email_input_update){user_email_input=user_email_input_update;prompt_for_correct_email("subscribe-form-at-bottom","email")}})});
function subscription_form_validate(){$("#subscribe-form").validate({onfocusout:function(element){this.element(element)},rules:{email:{required:true,email:true}},errorPlacement:function(label,element){if(element.attr("name")==="email")label.insertAfter(element.closest(".input-group"));else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");
$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var currentUrl=window.location.href;$("#src_url").val(currentUrl);var data=$("#subscribe-form").serialize();var url="/subscribe/submit";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,
success:subscription_success,error:onError,type:"POST"});return false}});$("#subscribe-form-popup").validate({rules:{email:{required:true,email:true}},errorPlacement:function(label,element){if(element.attr("name")==="email")label.insertAfter(element.closest(".input-group"));else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},
success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#subscribe-form-popup").serialize()+"&current_url="+window.location.href;var url="/subscribe/submit";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:subscription_success,error:onError,type:"POST"})}});$("#subscribe-form-popup-blog").validate({rules:{email:{required:true,
email:true}},errorPlacement:function(label,element){if(element.attr("name")==="email")label.insertAfter("#but_subscription_popup_form");else label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");
$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},submitHandler:function(){var data=$("#subscribe-form-popup").serialize()+"&current_url="+window.location.href;var url="/subscribe/submit";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:subscription_success,error:onError,type:"POST"});return false}});$("#subscribe-form-at-bottom").validate({onfocusout:function(element){this.element(element)},rules:{email:{required:true,email:true}},
errorPlacement:function(label,element){label.insertAfter(element)},highlight:function(label){$(label).closest(".form-group").addClass("has-error");$(label).closest(".form-group").removeClass("has-success");$(label).closest("input").addClass("error");$(label).closest("input").removeClass("valid")},success:function(label){$(label).closest(".form-group").addClass("has-success");$(label).closest(".form-group").removeClass("has-error");$(label).closest("input").addClass("valid");$(label).closest("input").removeClass("error")},
submitHandler:function(){var data=$("#subscribe-form-at-bottom").serialize();var url="/subscribe/submit";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:subscription_success,error:onError,type:"POST"});return false}})}
var subscription_success=function(data){try{NProgress.done();$(".subscription_alert").hide();$(".modal-backdrop").hide();$("input[name='email']").val("");$(".backdrop").hide();if(data.subscriptionLocation=="subscription_popup_blog"){$(".blog_subscription_alert").hide();if(!data.success)parent.postMessage({blog:"resizePopup",status:"error"},"*");else parent.postMessage({blog:"resizePopup",status:"success"},"*");$(".modal").css("padding-left","0px");$(".modal").css("padding-right","0px");$(".modal-dialog").css("margin",
"0px 0px")}if(!data.success)throw_error(data.errorThrown);else throw_success(data.successMsg);if(data.subscriptionLocation=="subscription_popup_blog")$(".modal").css("padding-right","0px")}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};function throw_success_blog(successMsg){$(".semi_success_modal_blog .text-message").html(successMsg);$(".semi_success_modal_blog").show()}
function throw_error_blog(errorThrown){if(errorThrown.validationError){throw_validation_error(errorThrown.validationError);return}$(".semi_error_modal_blog .text-message").html(errorThrown);$(".semi_error_modal_blog").show()};function filter_ads(){var isAppModalVisible=false;$(window).scroll(function(){var window_top=$(window).scrollTop();var reference_top=typeof $("#reference").offset()!="undefined"?$("#reference").offset().top:false;var container_height=typeof $("#internship_list_container").offset()!="undefined"?$("#internship_list_container").offset().top:false;if(reference_top!==false&&container_height!==false){if($("#end_internship_search_page_message_container").length!=0)if(isScrolledIntoView("#end_internship_search_page_message_container"))$("#subscription_content").slideUp();
else $("#subscription_content").slideDown();if(window.innerWidth>768)if(!isScrolledIntoView("#footer"))if(reference_top<window_top){$("#fixed_ads").css("position","fixed");$("#fixed_ads").css("top","15px");$("#fixed_ads").css("bottom","auto")}else $("#fixed_ads").css("position","static");else{var fixed_ads_relative_position=Math.max(0,$(this).scrollTop()-175);var fixed_ads_relative_position=Math.min($("#footer").offset().top-920,fixed_ads_relative_position);var search_criterias_relative_position=
Math.max(0,$(this).scrollTop()-200);var search_criterias_relative_position=Math.min($("#footer").offset().top-920,search_criterias_relative_position);if(search_criterias_relative_position<0)search_criterias_relative_position=0;if(fixed_ads_relative_position<0)fixed_ads_relative_position=0;$("#fixed_ads").css("position","relative");$("#fixed_ads").css("top",fixed_ads_relative_position)}else $("#fixed_ads").css("position","static")}})}
function make_ajax_call_for_marketing_ads(){var pathArray=window.location.pathname.split("/");var new_url="";if(pathArray[1]=="internships"||pathArray[1]=="internship"&&pathArray[2]=="search"){pathArray=pathArray.slice(2);new_url=pathArray.join("/");marketing(new_url+window.location.search)}}var marketing=function(url){var final_url="/internships_marketing_ajax/";final_url=final_url+url;$.ajax(final_url,{type:"GET",success:marketing_success,error:onError,datatype:"text"});return false};
var marketing_success=function(data){try{var marketing_right_container_html=data.marketing_right_container_html;var marketing_first_container_html=data.marketing_first_container_html;$("#marketing_right_container").html(marketing_right_container_html);$("#marketing_first_container").html(marketing_first_container_html);subscription_form_validate();$("#marketing_first_container").show()}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};var is_skill_training_clicked=0;
$(document).ready(function(){filter_ads();$(document.body).on("click",".copy_button",function(){var copy_text=$("<input>");$(this).append(copy_text);var text_to_copy=$(this).attr("data-id");if(navigator.userAgent.match(/ipad|ipod|iphone/i)){copy_text.val($("#"+text_to_copy).val());var el=copy_text.get(0);var editable=el.contentEditable;var readOnly=el.readOnly;el.contentEditable=true;el.readOnly=false;var range=document.createRange();range.selectNodeContents(el);var sel=window.getSelection();sel.removeAllRanges();
sel.addRange(range);el.setSelectionRange(0,999999);el.contentEditable=editable;el.readOnly=readOnly}else copy_text.val($("#"+text_to_copy).val()).select();document.execCommand("copy");$(".copy_button").popover("destroy");$(".copy_button").popover({placement:"top",html:true,content:"<span id='popover_text'>Link copied to the clipboard</span>"});$(".copy_button").popover("show");setTimeout(function(){$(".copy_button").popover("hide")},1E3);copy_text.remove()});$(document.body).on("click",".share_copy_button",
function(){var copy_text=$("<input>");$(this).append(copy_text);var text_to_copy=$(this).attr("data-id");if(navigator.userAgent.match(/ipad|ipod|iphone/i)){copy_text.val($("#"+text_to_copy).val());var el=copy_text.get(0);var editable=el.contentEditable;var readOnly=el.readOnly;el.contentEditable=true;el.readOnly=false;var range=document.createRange();range.selectNodeContents(el);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);el.setSelectionRange(0,999999);el.contentEditable=
editable;el.readOnly=readOnly}else copy_text.val($("#"+text_to_copy).val()).select();document.execCommand("copy");$(".share_copy_button").popover("destroy");$(".share_copy_button").popover({placement:"top",html:true,content:"<span id='popover_text'>Link copied to the clipboard</span>"});$(".share_copy_button").popover("show");setTimeout(function(){$(".share_copy_button").popover("hide")},1E3);copy_text.remove()});if(window.innerWidth>425)$(window).bind("popstate",function(event){location.reload()});
seo_heading();approve_internship();internship_status_messages();popovers();$(".skill_training").on("mousedown touch tap taphold",function(e){if(is_skill_training_clicked===0){is_skill_training_clicked=1;dataLayer.push({"event":"trainings_link_click","eventCategory":"trainings_link","eventAction":"click","eventLabel":"trainings_link"})}});if((mainRole=="student"||mainRole=="guest")&&typeof is_internship_active!="undefined"&&!is_internship_active)dataLayer.push({"event":"expired_internship_loaded",
"eventCategory":"application_closed_warning_message_on_expired_internships_details_page","eventAction":"impression_application_closed_message"});$(".cpy_button").click(function(e){e.preventDefault();var copy_text=$("<input>");$(this).append(copy_text);var popover_content="";copy_text.val($("#link").val()).select();document.execCommand("copy");popover_content="<span id='copytext_popover_text'>Link copied to the clipboard</span>";$(".copy_button_popover").popover({placement:"bottom",html:true,trigger:"manual",
content:popover_content});$(".copy_button_popover").popover("show");$("#copytext_popover_text").closest(".popover").find(".arrow").remove();setTimeout(function(){$(".copy_button_popover").popover("hide")},3E3);copy_text.remove()});$(".bookmark").click(function(e){e.preventDefault();var button=document.getElementById("bookmark");var data=button.getAttribute("data-state");if(data==="add"){button.setAttribute("data-state","added");add_to_bookmark()}else{button.setAttribute("data-state","add");remove_bookmark()}})});
var approve_internship_success=function(data){try{NProgress.done();$(".loading_image").hide();if(!data.success)throw_error(data.errorThrown);else if(window.opener)window.close();else window.location=data.successPage}catch(e){throw_error(e);NProgress.done();$(".loading_image").hide()}};
var seo_heading=function(){$("#content_open_button").toggle(function(){$("#content_open_button").removeClass("ic-16-chevron-down").addClass("ic-16-chevron-up");$("#open_content_collapse").slideDown()},function(){$("#content_open_button").removeClass("ic-16-chevron-up").addClass("ic-16-chevron-down");$("#open_content_collapse").slideUp()})};
function internship_status_messages(){var internship_status=$("#status").val();if(internship_status==="draft"&&mainRole!=="admin")if(employment_type=="job")internshala_alert("This is how your job posting would appear on Internshala website. If you wish to make any changes, click on 'Edit' button below at the end of the page or else, click on 'Post Job' button at the top of the page.");else internshala_alert("This is how your internship posting would appear on Internshala website. If you wish to make any changes, click on 'Edit' button below at the end of the page or else, click on 'Post Internship' button at the end of the page.");
else if(internship_status==="pending review"&&mainRole!=="admin"){if(typeof internship_posting_success_message!=="undefined"&&internship_posting_success_message)if(typeof internship_type!=="undefined"&&internship_type=="ibsi")throw_semi_success(internship_posting_success_message,"Okay");else internshala_alert(internship_posting_success_message,"","Okay")}else if(typeof is_internship_auto_approved!="undefined"&&is_internship_auto_approved==1&&mainRole!=="admin")if(typeof to_show_invite_applicant!==
"undefined"&&to_show_invite_applicant)throw_invite_applicant_success("/employer/applications/"+internship_id+"/1/invite?source=auto_approve_modal");else throw_success("Congratulations, your internship has been auto approved and is now live. You should start receiving applications soon. ","","Okay");else if(typeof is_internship_sent_for_followup_for_unpaid!="undefined"&&is_internship_sent_for_followup_for_unpaid==1&&mainRole!=="admin")internshala_alert("Kindly note that you've posted an unpaid internship. We allow unpaid internships only in case of NGOs/ NPOs or niche profiles. Please update the stipend amount by clicking \u2018Edit internship\u2019 button at the bottom of this page.");
else if(typeof is_internship_sent_for_followup_for_less_stipend!="undefined"&&is_internship_sent_for_followup_for_less_stipend==1&&mainRole!=="admin")internshala_alert("As per our policy, we allow a minimum assured stipend of Rs.2000/month for an in-office internship and Rs.1000/month for a work from home internship. Please review the stipend amount by clicking \u2018Edit internship\u2019 button at the bottom of this page.")}
function approve_internship(){$("#approve_internship").click(function(e){e.preventDefault();var bool=confirm("Are you sure you want to make this "+employment_type+" Live ?");if(bool){var data={"id":internship_id,"status":employment_type=="internship"?"active":"to_process_active","source":"detailPageAdmin"};var url="/admin/change_internship_status/";NProgress.start();$(".loading_image").show();$.ajax(url,{data:data,success:approve_internship_success,error:onError,type:"POST"})}})}
function throw_invite_applicant_success(successPage){$msg="Congratulations, your internship has been auto approved and is now live. You should start receiving applications soon."+"<br><br>"+"Meanwhile, you can start inviting relevant candidates with a profile matching your internship requirements.";success_modal($msg,successPage,"Invite applicants","",true,"Cancel")}
function popovers(){$(".rewards_popover").each(function(){$(this).popover({trigger:"hover",container:"body",placement:"bottom",html:true,sanitize:false,content:'<div class="close_tooltip_container"></div><div class="popover-content">'+$(this).attr("popover_content")+"</div>"})})}function add_to_bookmark(){var data={"id":internship_id};var url="/bookmark/add_to_bookmark/";$.ajax(url,{data:data,success:added_to_bookmark,error:onError,type:"POST"})}
var added_to_bookmark=function(data){if(!data.success)throw_error(data.errorThrown);else{general_toast(data.message);$(".bookmark-icon").addClass("ic-24-filled-bookmark").removeClass("ic-24-bookmark")}};function remove_bookmark(){var data={"id":internship_id};var url="/bookmark/remove_bookmark/";$.ajax(url,{data:data,success:removed_bookmark,error:onError,type:"POST"})}var removed_bookmark=function(data){if(!data.success)throw_error(data.errorThrown);else{general_toast(data.message);$(".bookmark-icon").addClass("ic-24-bookmark").removeClass("ic-24-filled-bookmark")}};
